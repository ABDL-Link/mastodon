- content_for :page_title do
  = t('directories.explore_mastodon', title: site_title)

- content_for :header_tags do
  %meta{ name: 'description', content: t('directories.explanation') }

  = opengraph 'og:site_name', t('about.hosted_on', domain: site_hostname)
  = opengraph 'og:type', 'website'
  = opengraph 'og:title', t('directories.explore_mastodon', title: site_title)
  = opengraph 'og:description', t('directories.explanation')
  = opengraph 'og:image', File.join(root_url, 'android-chrome-192x192.png')

.page-header
  %h1= 'User Locations'
  %p= 'Discover users based on their location'

.grid
  .column-0
    - if @accounts.empty?
      = nothing_here
    - else
      .directory
        %table.accounts-table
          %tbody
            - @accounts.each do |account|
              - if account != current_account
                %tr
                  %td= account_link_to account
                  - if current_account.location_valid?
                    %td.accounts-table__count.optional
                      = current_account.distance(account) || '?'
                      %small= 'distance'
                  %td.accounts-table__count.optional
                    = account.location
                    %small= 'location'
                  %td.accounts-table__count
                    - if account.last_status_at.present?
                      %time.time-ago{ datetime: account.last_status_at.iso8601, title: l(account.last_status_at) }= l account.last_status_at
                    - else
                      \-
                    %small= t('accounts.last_active')
  .column-1
    - if user_signed_in?
      .box-widget.notice-widget
        - if current_account.location_shown?
          %p= 'Your location: ' + current_account.location
        - else
          %p= 'You are not opted-in yet!'

          = link_to settings_profile_path do
            = t('settings.edit_profile')
            = fa_icon 'chevron-right fw'
